package kr.co.hanacard.board.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

import kr.co.hanacard.board.service.BoardService;

//@SessionAttributes({"loginVO", "hanaList"}) // mav.addObject() 메소드로 저장하는 객체이름이 loginVO라면, 세션에 등록하라!
@Controller
public class BoardController {
	
	
	@Autowired //BoardService 클래스 위에 어노테이션이 있기 때문에, 빈이 생성되기 때문에 Autowired 하면 자동으로 그것을 여기에 자동으로 넣는다. new 할 필요가 없다.
	private BoardService boardService;
	
	
//	@GetMapping("/board")
//	public String baseChart() {
//		
//		return "/board/list";
//	}
	
	
	//<mvc:mapping path="/board"/> 으로 설정한 경우, @RequestMapping("/board") 아래에 있는 메소드가 실행되기 전에 prehandle() 실행된다. 
	@RequestMapping("/board") // http://localhost:9999/Mission-Spring/board 이 경로로 요청이 오면, 아래의 메소드를 실행시킨다.
	public ModelAndView list() {
		
		List<BoardVO> boardList = boardService.selectAllBoard(); //서비스 객체는, DAO와 연동되어 원하는 sql 실행후 결과를 가져온다.

		ModelAndView mav = new ModelAndView("board/list"); //포워드 시킬 jsp 주소다. spring-mvc.xml에 view-resolvers 태그에 정해둠.
		mav.addObject("boardList", boardList); //HttpServletRequest. request영역에 올림.
		
		return mav;
	}
	
	
	
	
	
	

}
